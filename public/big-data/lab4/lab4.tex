\input{../../../preamble}
\input{../../../commons}
\input{../../../commons_python}

\newcommand{\labnumber}{4} % fourth lab
\input{../preamble}
\input{../constants}

\usepackage{longtable,tabu}

\graphicspath{{figures/}}

\begin{document}
\Ukrainian

\input{../../../title}
\addtocounter{page}{1}

\section{Основы MongoDB}
\subsection*{Цель}
Анализ возможностей и перспектив внедрения MongoDB.
\subsection*{Задачи}
\begin{itemize}
	\item выявить преимущества и недостатки MongoDB;
	\item проанализировать этапы создания MongoDB-приложения;
	\item проанализировать структуру кластера MongoDB.
\end{itemize}

\subsection{Преимущества и недостатки MongoDB}
MongoDB --- это документо-ориентированная база данных, в отличии от традиционных реляционных баз данных, не использует табличный способ представления со связями через внешние ключи, основанная на принципе хранении документов в Binary JSON формате. Т.е. каждая запись — это документ, без жестко заданной схемы, который может содержать вложенные документы.

Преимущества:
\begin{itemize}
	\item документо-ориентированное хранилище (простая и мощная JSON-подобная схема данных);
	\item достаточно гибкий язык для формирования запросов;
	\item динамические запросы;
	\item полная поддержка индексов;
	\item профилирование запросов;
	\item быстрые обновления «на месте»;
	\item эффективное хранилище двоичных данных больших объемов (фото, видео и т.п.);
	\item журналирование операций, модифицирующие данные в БД;
	\item поддержка отказоустойчивости и масштабируемости: асинхронная репликация, набор реплик и шардинг;
	\item может работать в соответствии с парадигмой MapReduce;
	\item имеет распределенный доступ к данным, расположенных на нескольких серверах.
\end{itemize}

Недостатки: 
\begin{itemize}
	\item отсутствует оператор «join». Обычно данные могут быть организованы более денормализованным способом, но на разработчиков ложится дополнительная нагрузка по обеспечению непротиворечивости данных;
	\item нет такого понятия, как «транзакция». Атомарность гарантируется только на уровне целого документа, т.е. частичное обновление документа произойти не может;
	\item отсутствие понятие «изоляции». Любые данные, которые считываются одним клиентом, могут параллельно изменяться другим клиентом;
	\item требовательна к ресурсам – память и место на диске.
\end{itemize}

\subsection{Этапы создания MongoDB приложения}
Первый этап создания MongoDB базы данных – это запуск MongoDB. Для этого необходимо выполнить следующую команду:
\begin{lstlisting}
> sudo systemctl start mongodb.service
\end{lstlisting}

Далее стоит проверить статус с помощью следующей команды:
\begin{lstlisting}
> sudo systemctl status mongodb.service
\end{lstlisting}

Далее необходимо зайти в mongo shell с помощью следующей команды:
\begin{lstlisting}
> sudo mongo –shell
\end{lstlisting}

Теперь можно непосредственно создать новую базу данных. Для этого необходимо выполнить следующую команду:
\begin{lstlisting}
> use database_name
\end{lstlisting}

Данная команда создаст новую базу данных, если она не существует. Если же БД уже существует она вернет существующую базу данных. Для проверки текущей базы данных используется команда, которая вернёт имя выбранной базы данных:
\begin{lstlisting}
> db
\end{lstlisting}

Для отображения списка всех баз данных необходимо выполнить следующую команду:
\begin{lstlisting}
> show dbs
\end{lstlisting}

\subsection{Структура кластера MongoDB}
MongoDB --- это JSON подобная база данных, но основана на спецификации BSON. В основе базы лежит документ, который, по сути, является набор key/value. Ключи в документе это строки, для задания имени доступны все UTF-8 символы. Документ не может содержать поля с одинаковыми ключами. Документы отсортированы в том порядке в котором были добавлены в базу.

Коллекция --- это группа документов. Идентифицируются коллекции по имени. На самом деле у коллекций нет определенного паттерна и в нее можно добавлять любые документы. Коллекции имеют динамическую схему, что означает, что документы в коллекции могу иметь разные структуры.

Один из способов организовать структуру коллекций это использовать символ «.» в имени коллекции. Коллекции после «.» - не дочерние коллекции. Т.е. как таковых подколлекций не существует, но многие инструменты дают дополнительные возможности при подобном наименовании.

\subsection*{Выводы}
В процессе выполнения лабораторной работы были выявлены достоинства и недостатки MongoDB, определены этапы создания базы данных на MongoDB, а также был проанализирована структура кластера MongoDB. MongoDB отлично подходит для проектов с динамической структурой модели данных, а также для систем с распределенными серверами.

\end{document}
